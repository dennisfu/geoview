/*! Package:geoview-details-panel: 0.1.0 - "0e93898a9d9dc9a4d19134785fd57e5221d5fdc2" - 2023-01-24T23:48:21.894Z */
"use strict";(self.webpackChunkgeoview_core=self.webpackChunkgeoview_core||[]).push([[138],{16933:(e,t,n)=>{var a=n(79748),i=n(13231),o=n(55774),r=n(32844),l=n(7e4),s=n(20706),u=n(9211),c=n(33719),p=n(45608),d=n(45202),f=window;function h(e){var t=e.mapId,n=f.cgpv,a=n.api,i=n.react,o=i.useState,r=i.useEffect,l=o([]),s=(0,p.Z)(l,2),u=s[0],h=s[1],m=o(),g=(0,p.Z)(m,2),v=g[0],y=g[1];return r((function(){return a.event.on(a.eventNames.GET_FEATURE_INFO.ALL_QUERIES_DONE,(function(e){if((0,c.gNW)(e)){var n=e.resultSets,i=[];Object.keys(n).forEach((function(e){var o=(0,c.dIw)(a.map(t).layer.registeredLayers[e].layerName,t),r=n[e];r.length>0&&i.push({layerPath:e,layerName:o,features:r})})),i.length>0?h(i):h([])}else h([])}),t,"".concat(t,"-DetailsAPI")),function(){a.event.off(a.eventNames.GET_FEATURE_INFO.ALL_QUERIES_DONE,t)}}),[]),r((function(){y(a.map(t).details.createDetails(t,u,{backgroundStyle:"dark",singleColumn:!0}))}),[u]),(0,d.jsx)("div",{children:v})}const m=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"GeoView Details Panel/Legend Config Schema","type":"object","version":1,"comments":"Configuration for GeoView layers package.","additionalProperties":false,"properties":{"reorderable":{"type":"boolean","default":true,"description":"Specifies if the items in the legend can be reordered."},"allowImport":{"type":"boolean","default":true,"description":"Specifies if the user-added layers are allowed."},"isOpen":{"type":"object","description":"Specifies whether the legend is opened by default on initial loading of the map for small, medium, and large viewports.","properties":{"large":{"type":"boolean","default":false,"description":"Whether the legend is opened by default on initial loading of the map for large viewports."},"medium":{"type":"boolean","default":false,"description":"Whether the legend is opened by default on initial loading of the map for medium viewports."},"small":{"type":"boolean","default":false,"description":"Whether the legend is opened by default on initial loading of the map for small viewports."}},"additionalProperties":false},"suportedLanguages":{"type":"array","uniqueItems":true,"items":{"type":"string","enum":["en","fr"]},"default":["en","fr"],"description":"ISO 639-1 code indicating the languages supported by the configuration file.","minItems":1},"version":{"type":"string","enum":["1.0"],"description":"The schema version used to validate the configuration file. The schema should enumerate the list of versions accepted by this version of the viewer."}},"required":["suportedLanguages"]}'),g=JSON.parse('{"reorderable":true,"allowImport":true,"isOpen":{"small":false,"medium":false,"large":false},"suportedLanguages":["en","fr"]}');function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.Z)(this,n)}}var y=window,b=function(e){(0,r.Z)(n,e);var t=v(n);function n(e,i){var r;return(0,a.Z)(this,n),r=t.call(this,e,i),(0,u.Z)((0,o.Z)(r),"schema",(function(){return m})),(0,u.Z)((0,o.Z)(r),"defaultConfig",(function(){return(0,c.ZQJ)(g)})),(0,u.Z)((0,o.Z)(r),"translations",(0,c.ZQJ)({en:{detailsPanel:"Details",nothing_found:"Nothing found",click_map:"Choose a point on the map to start",action_back:"Back"},fr:{detailsPanel:"Détails",nothing_found:"Aucun résultat",click_map:"Choisissez un point sur la carte pour commencer",action_back:"Retour"}})),(0,u.Z)((0,o.Z)(r),"added",(function(){var e,t,n,a,i,o=r.pluginProps.mapId,l=y.cgpv,s=l.api,u=l.ui.elements.DetailsIcon,c=s.map(o).displayLanguage;i=null===(e=r.configObj)||void 0===e||null===(t=e.isOpen)||void 0===t?void 0:t.large;var p={id:"detailsPanelButton",tooltip:r.translations[c].detailsPanel,tooltipPlacement:"right",children:(0,d.jsx)(u,{}),visible:!0},f={title:r.translations[c].detailsPanel,icon:'<i class="material-icons">details</i>',width:300,status:i};r.buttonPanel=s.map(o).appBarButtons.createAppbarPanel(p,f,null),null===(n=r.buttonPanel)||void 0===n||null===(a=n.panel)||void 0===a||a.changeContent((0,d.jsx)(h,{mapId:o}))})),r.buttonPanel=null,r}return(0,i.Z)(n,[{key:"removed",value:function(){var e=this.pluginProps.mapId,t=y.cgpv.api;this.buttonPanel&&t.map(e).appBarButtons.removeAppbarPanel(this.buttonPanel.buttonPanelId)}}]),n}(c.Vw$);y.plugins=y.plugins||{},y.plugins["details-panel"]=(0,c.RFZ)(b)}},e=>{var t;t=16933,e(e.s=t)}]);
//# sourceMappingURL=geoview-details-panel.js.map